<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>c++ 模板偏特化 | 个人博客</title>
<meta name=keywords content="cpp"><meta name=description content="摘要：内容[^01]"><meta name=author content="Yangly0"><link rel=canonical href=https://yangly0.github.io/posts/20250207233212/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://yangly0.github.io/images/favicon/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://yangly0.github.io/images/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yangly0.github.io/images/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://yangly0.github.io/images/favicon/apple-touch-icon.png><link rel=mask-icon href=https://yangly0.github.io/images/favicon/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://yangly0.github.io/posts/20250207233212/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css integrity=sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js integrity=sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js integrity=sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta property="og:url" content="https://yangly0.github.io/posts/20250207233212/"><meta property="og:site_name" content="个人博客"><meta property="og:title" content="c++ 模板偏特化"><meta property="og:description" content="摘要：内容[^01]"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-02-07T23:32:12+00:00"><meta property="article:modified_time" content="2025-02-07T23:32:12+00:00"><meta property="article:tag" content="Cpp"><meta property="og:image" content="https://yangly0.github.io/images/favicon/favicon.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yangly0.github.io/images/favicon/favicon.png"><meta name=twitter:title content="c++ 模板偏特化"><meta name=twitter:description content="摘要：内容[^01]"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://yangly0.github.io/posts/"},{"@type":"ListItem","position":2,"name":"c++ 模板偏特化","item":"https://yangly0.github.io/posts/20250207233212/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"c++ 模板偏特化","name":"c\u002b\u002b 模板偏特化","description":"摘要：内容[^01]\n","keywords":["cpp"],"articleBody":"摘要：内容[^01]\n在C++中，模板偏特化（Partial Specialization）是一种模板机制，用于为模板类或模板结构提供针对特定类型或类型特征的特化版本。与全特化（Full Specialization）不同，偏特化允许对模板的一部分参数进行特化，而其他参数仍然保持通用。\n1、模板偏特化的概念模板偏特化允许你为模板类或模板结构提供一个或多个参数的特化版本，而其他参数仍然可以是任意类型。这使得模板在某些特定情况下可以提供更优化或更合适的实现。\n2、模板偏特化的语法模板偏特化的语法如下：\ntemplate \u003ctypename T, typename U\u003e class MyClass; // 原始模板声明 template \u003ctypename T\u003e class MyClass\u003cT, int\u003e; // 偏特化版本，U 被特化为 int 在这个例子中，MyClass 是对原始模板 MyClass 的偏特化，其中第二个参数 U 被特化为 int，而第一个参数 T 仍然可以是任意类型。\n3、模板偏特化的使用场景模板偏特化通常用于以下场景：\n针对特定类型提供优化实现：当模板的某些参数具有特定类型时，提供更高效的实现。 处理特定类型特征：例如，区分指针类型、引用类型或数组类型等。 4、示例\n以下是一个简单的示例，展示如何使用模板偏特化：\n原始模板\ntemplate \u003ctypename T, typename U\u003e class MyClass { public: void print() { std::cout \u003c\u003c \"General template\" \u003c\u003c std::endl; } }; 偏特化版本\ntemplate \u003ctypename T\u003e class MyClass\u003cT, int\u003e { public: void print() { std::cout \u003c\u003c \"Partial specialization for int\" \u003c\u003c std::endl; } }; 使用示例\nint main() { MyClass\u003cdouble, int\u003e obj1; // 使用偏特化版本 obj1.print(); // 输出：Partial specialization for int MyClass\u003cdouble, double\u003e obj2; // 使用原始模板 obj2.print(); // 输出：General template return 0; } 5、模板偏特化的限制\n仅适用于类模板和结构模板：函数模板不支持偏特化，但可以通过函数重载或模板全特化来实现类似的功能。 必须在命名空间作用域中定义：模板偏特化不能在局部作用域中定义。 特化版本的参数必须是原始模板的子集：特化版本的参数必须是原始模板参数的一部分。 6、函数模板的“偏特化”\n虽然函数模板不支持偏特化，但可以通过函数重载或模板全特化来实现类似的效果。例如：\ntemplate \u003ctypename T, typename U\u003e void print(T t, U u) { std::cout \u003c\u003c \"General template\" \u003c\u003c std::endl; } template \u003ctypename T\u003e void print(T t, int u) { std::cout \u003c\u003c \"Partial specialization for int\" \u003c\u003c std::endl; } 7、总结\n模板偏特化是C++模板机制中一个强大的工具，允许你为模板类或结构提供针对特定类型或类型特征的特化版本。通过合理使用模板偏特化，可以优化代码性能，提高代码的可读性和可维护性。\n","wordCount":"155","inLanguage":"en","image":"https://yangly0.github.io/images/favicon/favicon.png","datePublished":"2025-02-07T23:32:12Z","dateModified":"2025-02-07T23:32:12Z","author":{"@type":"Person","name":"Yangly0"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://yangly0.github.io/posts/20250207233212/"},"publisher":{"@type":"Organization","name":"个人博客","logo":{"@type":"ImageObject","url":"https://yangly0.github.io/images/favicon/favicon.png"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://yangly0.github.io/ accesskey=h title="个人博客 (Alt + H)">个人博客</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://yangly0.github.io/posts/ title=文章><span>文章</span></a></li><li><a href=https://yangly0.github.io/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://yangly0.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://yangly0.github.io/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">c++ 模板偏特化</h1><div class=post-meta><span title='2025-02-07 23:32:12 +0000 UTC'>February 7, 2025</span>&nbsp;·&nbsp;Yangly0</div></header><div class=post-content><p>摘要：内容[^01]</p><p>在C++中，模板偏特化（Partial Specialization）是一种模板机制，用于为模板类或模板结构提供针对特定类型或类型特征的特化版本。与全特化（Full Specialization）不同，偏特化允许对模板的一部分参数进行特化，而其他参数仍然保持通用。</p><p>1、模板偏特化的概念模板偏特化允许你为模板类或模板结构提供一个或多个参数的特化版本，而其他参数仍然可以是任意类型。这使得模板在某些特定情况下可以提供更优化或更合适的实现。</p><p>2、模板偏特化的语法模板偏特化的语法如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=p>,</span> <span class=k>typename</span> <span class=n>U</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyClass</span><span class=p>;</span> <span class=c1>// 原始模板声明
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyClass</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span><span class=p>;</span> <span class=c1>// 偏特化版本，U 被特化为 int
</span></span></span></code></pre></div><p>在这个例子中，MyClass&lt;T, int> 是对原始模板 MyClass&lt;T, U> 的偏特化，其中第二个参数 U 被特化为 int，而第一个参数 T 仍然可以是任意类型。</p><p>3、模板偏特化的使用场景模板偏特化通常用于以下场景：</p><ul><li>针对特定类型提供优化实现：当模板的某些参数具有特定类型时，提供更高效的实现。</li><li>处理特定类型特征：例如，区分指针类型、引用类型或数组类型等。</li></ul><p>4、示例</p><p>以下是一个简单的示例，展示如何使用模板偏特化：</p><p>原始模板</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=p>,</span> <span class=k>typename</span> <span class=n>U</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyClass</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>print</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;General template&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>偏特化版本</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyClass</span><span class=o>&lt;</span><span class=n>T</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=n>print</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Partial specialization for int&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>使用示例</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>MyClass</span><span class=o>&lt;</span><span class=kt>double</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>obj1</span><span class=p>;</span> <span class=c1>// 使用偏特化版本
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>obj1</span><span class=p>.</span><span class=n>print</span><span class=p>();</span> <span class=c1>// 输出：Partial specialization for int
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=n>MyClass</span><span class=o>&lt;</span><span class=kt>double</span><span class=p>,</span> <span class=kt>double</span><span class=o>&gt;</span> <span class=n>obj2</span><span class=p>;</span> <span class=c1>// 使用原始模板
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>obj2</span><span class=p>.</span><span class=n>print</span><span class=p>();</span> <span class=c1>// 输出：General template
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>5、模板偏特化的限制</p><ul><li>仅适用于类模板和结构模板：函数模板不支持偏特化，但可以通过函数重载或模板全特化来实现类似的功能。</li><li>必须在命名空间作用域中定义：模板偏特化不能在局部作用域中定义。</li><li>特化版本的参数必须是原始模板的子集：特化版本的参数必须是原始模板参数的一部分。</li></ul><p>6、函数模板的“偏特化”</p><p>虽然函数模板不支持偏特化，但可以通过函数重载或模板全特化来实现类似的效果。例如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=p>,</span> <span class=k>typename</span> <span class=n>U</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=n>print</span><span class=p>(</span><span class=n>T</span> <span class=n>t</span><span class=p>,</span> <span class=n>U</span> <span class=n>u</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;General template&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>template</span> <span class=o>&lt;</span><span class=k>typename</span> <span class=n>T</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=n>print</span><span class=p>(</span><span class=n>T</span> <span class=n>t</span><span class=p>,</span> <span class=kt>int</span> <span class=n>u</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>std</span><span class=o>::</span><span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=s>&#34;Partial specialization for int&#34;</span> <span class=o>&lt;&lt;</span> <span class=n>std</span><span class=o>::</span><span class=n>endl</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>7、总结</p><p>模板偏特化是C++模板机制中一个强大的工具，允许你为模板类或结构提供针对特定类型或类型特征的特化版本。通过合理使用模板偏特化，可以优化代码性能，提高代码的可读性和可维护性。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://yangly0.github.io/tags/cpp/>Cpp</a></li></ul><nav class=paginav><a class=prev href=https://yangly0.github.io/posts/20250208215152/><span class=title>« Prev</span><br><span>Jenkins部署与集成</span>
</a><a class=next href=https://yangly0.github.io/posts/20250207230532/><span class=title>Next »</span><br><span>C++ 如何排查多线程中的死锁问题？</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=Yangly0/Yangly0.github.io data-repo-id=R_kgDONUBpmg data-category=Announcements data-category-id=DIC_kwDON69qd84CnC5n data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=noborder_light data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script>`</article></main><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script></body></html>